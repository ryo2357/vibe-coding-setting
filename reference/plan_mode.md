# Plan mode

Copilot Agent の plan mode についての詳細なルールや運用手順は、以下の通りです。

- Copilot Agent は他のコーディングエージェントと異なり、コーディングを始める前に詳細なコーディング計画を立てる いわゆる Plan mode を持ちません。
- その代用として、コーディングを始める前に、ユーザーと一緒にコーディング計画 (Plan) を立てて、それを Markdown 形式で保存します
- コーディング計画 ファイル(Plan ファイル)をもとにして Copilot は実行してください

## 開発フロー

1. アイディアファイルからコーディング計画を作成
2. コーディング計画をもとに実装を実行
3. コーディング計画の実行後、実装内容をコンテキストとして仕様書を作成・更新
4. 次のコーディング計画を作成する際は、既存の仕様書を参照して矛盾のない計画を立案

## Plan 作成時の留意点

- Plan は `.github/vibe/plans` ディレクトリ内に Markdown 形式で記述します。
- Plan 作成前に、`.github/vibe/specs` ディレクトリ内の既存仕様書を参照し、矛盾のない計画を立案します。
- Plan のファイル名は、以下のルールに従ってください。
  - 依頼内容に関連するキーワードを含めるようにします。
  - ファイル名の先頭には、3 桁の連番を付けます。
  - 作成日時はファイルの内容に記述します。
  - 単一プランの場合: `001-add-user-feature.md`
  - 分割プランの場合: `001-01-add-user-feature.md`, `001-02-add-user-feature.md`
- 作成日は以下の形式でファイルの内容に記述します。
  作成日: YYYY-MM-DD
  例: 作成日: 2025-07-10

## Plan 分割時の留意点

- 実装手順が複数ある場合は分割を検討します。
- ビルド・動作確認・テストの段階も 1 つの手順として扱います。
- 分割時は以下の原則に従います：
  - 各プランファイルは独立して理解できるように記述する
  - 前のプランファイルへの依存関係を明記する
  - 全体の進捗状況を把握できるように、総手順数と現在の位置を記載する
  - 各手順の最後にビルド・動作確認の項目を含める
- 分割プランの構成例：
  - `01-`: 基本設計・環境構築・初回ビルド確認
  - `02-`: コアデータモデル実装・単体テスト
  - `03-`: UI・画面表示機能・表示確認
  - `04-`: 操作・制御機能・操作テスト
  - `05-`: 拡張機能・最適化・総合テスト

## Plan 実行後の仕様書管理

- Plan の実行完了後は、実装内容をもとに仕様書を作成・更新します。
- 仕様書は `.github/vibe/specs` ディレクトリ内に Markdown 形式で管理します。
- 仕様書のファイル名は、対象となる機能やモジュール名を明確に示すものとします。
  - 例: `user-management.md`, `authentication.md`, `api-endpoints.md`
- 仕様書の内容には以下を含めます：
  - 機能概要
  - 実装詳細
  - データ構造
  - API 仕様
  - 制約事項・留意点
  - 関連するファイルパス
- 既存仕様書がある場合は、実装内容に基づいて更新を行います。
- 仕様書の更新時は、変更履歴を記録し、Plan 番号との関連付けを明記します。
