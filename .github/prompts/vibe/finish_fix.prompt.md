---
applyTo: "**"
---

# 前提

- chat の対話相手は日本人です。説明は**必ず日本語**で行ってください。

## 基本方針

- このプロジェクトでは、GitHub Copilotによるコーディング計画と仕様書によって管理した開発を行います。
- 仕様書は各コーディング計画の実装で矛盾が生じないように、参照・更新されます。
- Copilot Agent は他のコーディングエージェントと異なり、コーディングを始める前に詳細なコーディング計画を立てる いわゆる Plan mode を持ちません。
- その代用として、コーディングを始める前に、ユーザーと一緒にコーディング計画を立てて、それを Markdown 形式で保存します。

## Rustプロジェクト開発時の注意点

- 依存関係の追加は、Cargo.toml ファイルへの記述ではなく`cargo add` コマンドを使用してください。

## 開発フローの原則

### 1. 開発フロー（初回）

`.docs/specs` ディレクトリ内に仕様書が存在しない場合は、以下のフローで開発を行います。

1. アイディアファイルからコーディング計画を作成
2. コーディング計画をもとに実装を実行
3. コーディング計画の実行後、実装内容からプロジェクトの仕様書を作成する

### 2. 開発フロー（2回目以降）

`.docs/specs` ディレクトリ内に仕様書が存在する場合は、以下のフローで開発を行います。

1. アイディアファイルと仕様書からコーディング計画を作成
2. コーディング計画をもとに実装を実行
3. コーディング計画の実行後、実装内容を仕様書に反映・更新する


## アイディアファイル

- アイディアファイルは `.docs/ideas` ディレクトリ内に Markdown 形式で記述します。
- 実装したい機能の概要と仕様を記述しています。

## コーディング計画

- コーディング計画は `.docs/plans` ディレクトリ内に Markdown 形式で記述します。
- コーディング計画の作成前に、`.docs/specs` ディレクトリ内の既存仕様書を参照し、矛盾のない計画を立案します。
- `.docs/specs` ディレクトリ内に仕様書が存在しない場合は、アイディアファイルをもとにコーディング計画を作成します。
- コーディング計画のファイル名は、以下のルールに従ってください。
  - 依頼内容に関連するキーワードを含めるようにします。
  - ファイル名の先頭には`.docs/plans` ディレクトリ内で未使用の3桁ゼロ埋め連番とし、重複禁止。決定手順は
    1. `.docs/plans` 内の `^\d{3}-.*\.md` の XXX を数値化し最大値を取得
    2. (存在しなければ 000 とみなし) 最大値 + 1 を次番号とする
  - 作成日時はファイルの内容に記述します。
  - 単一プランの場合: `001-add-user-feature.md`
  - 分割プランの場合: `001-01-add-user-feature.md`, `001-02-add-user-feature.md`
- 作成日時と参照にしたアイディアファイルを以下の形式でファイルに記述します。
  作成日時: YYYY-MM-DD hh:mm
  参照アイディアファイル: `<アイディアファイル名>`
  例: 
    作成日時: 2025-07-10 12:00
    参照アイディアファイル: `001-idea.md`
- コーディング計画には以下を含める
  - 実装する機能
  - 機能の詳細な仕様
  - 技術的な実装方針


### コーディング計画分割時の留意点

- 実装手順が複数ある場合は分割を行います。
- 分割時は以下の原則に従います：
  - 各コーディング計画は独立して理解できるように記述する
  - 前のコーディング計画への依存関係を明記する
  - 各手順の最後にビルドでの確認できる範囲で分割する
- 分割プランの構成例：
  - `01-`: 基本設計・環境構築・初回ビルド確認
  - `02-`: コアデータモデル実装
  - `03-`: UIの実装
  - `04-`: 操作機能の実装
  - `05-`: 制御機能の実装

## 仕様書

- コーディング計画の実行完了後は、実装内容をもとに仕様書を作成・更新します。
- 次回コーディング計画作成時に参照し、仕様に沿うように計画します。
- 仕様書にない機能を追加する場合は、プロジェクト構造を参照して最適な実装方法を検討します。
- 仕様書は `.docs/specs/project.md` に Markdown 形式で管理します。
- 仕様書の内容には以下を含めます：
  - プロジェクト概要
  - プロジェクト構造
  - データ構造
- 既存仕様書がある場合は、実装内容に基づいて更新を行います。
- 作成日時と更新日時は以下の形式でファイルの内容に記述します。
  作成日時: YYYY-MM-DD hh:mm
  更新日時: YYYY-MM-DD hh:mm
  例:
    作成日時: 2025-07-10 12:00
    更新日時: 2025-07-11 12:00


## 報告書

- コーディング計画の実行完了後は、実装内容をもとに報告書を作成します。
- 仕様書は `.docs/reports` ディレクトリ内に Markdown 形式で記述します。
- ファイル名は`XXX-<実装した機能名>_report.md` の形式で作成します。
- XXXは`.docs/reports` ディレクトリ内で未使用の3桁ゼロ埋め連番とし、重複禁止。決定手順は
  1. `.docs/reports` 内の `^\d{3}-.*_report\.md` の XXX を数値化し最大値を取得
  2. (存在しなければ 000 とみなし) 最大値 + 1 を次番号とする
- 作成日時と参照にしたコーディング計画を以下の形式でファイルに記述します。
  作成日時: YYYY-MM-DD hh:mm
  参照コーディング計画: `<コーディング計画のファイル名>`
  例: 
    作成日時: 2025-07-10 12:00
    参照コーディング計画: `001-add-user-feature.md`
- 報告書の内容には下記を完結にまとめます：
  - 実装内容の概要
  - 実装結果とコーディング計画の差異、差異の理由

